<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>Create New User</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/cosmo/bootstrap.min.css" />
    <script src= "https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" ></script>
</head>
<body>
<nav class="navbar navbar-expand-sm navbar-dark fixed" style="background-color: #222222; color: #f2f2f2;">
  <h3><a class="navbar-brand" th:href="@{'/'}">AMDOCS Bank</a></h3>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="collapsibleNavbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" th:href="@{'/new'}">Create New User</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" th:href="@{'/'}">Show All Users</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" th:href="@{'/acc'}">Show All Accounts</a>
      </li>    
    </ul>
  </div>  
</nav><br><br>
<div align="center">
    <h1>Create New User</h1>
    <br />
     <div class="col-sm-4">
    <form action="#" th:action="@{/save}" th:object="${user}"  onsubmit="validation()" method="post">

      
 		<div alight="left">
            <tr>
                <label class="form-label" >Name of the User</label>
                <td>
	                <input type="hidden" th:attr="name=userid" class="form-control" placeholder="User Id" th:value="${id}"/>
	                <input type="text" th:field="*{name}" id="name" onkeyup="myFunction()" class="form-control" placeholder="Name of the User" required/>
	                <span id="nameerror" class="font-weight-bold"></span>
                </td>
            </tr>
         </div>   
            
          	<div alight="left">
          
            <tr>
                 <label class="form-label" >Email Id</label>
                <td><input type="text" id="email" th:field="*{emailid}" onkeyup="myFunction1()" class="form-control" placeholder="Email Id" required/>
                 <span id="emailerror" class="font-weight-bold"></span></td>
            </tr>
            </div> 
            <div alight="left">
                 <tr>
                 <label class="form-label" >Mobile Number</label>
                <td><input type="text" id="mobile" th:field="*{mobile}" onkeyup="myFunction2()" class="form-control" placeholder="Mobile Number" required/>
                 <span id="mobileerror" class="font-weight-bold"></span></td>
            </tr>
            </div> 
            <div alight="left">
                 <tr>
                 <label class="form-label" >Secondary Mobile Number</label>
                <td><input type="text" id="smobile" th:field="*{smobile}" onkeyup="myFunction3()" class="form-control" placeholder="Secondary Mobile Number" required/>
                <span id="smobileerror" class="font-weight-bold"></span></td>
            </tr>
            </div> 
            <div alight="left">
                 <tr>
                 <label class="form-label" >Date of birth (YYYY-MM-DD)</label>
                <td><input type="text" id="dob" th:field="*{dob}" onkeyup="myFunction4()" class="form-control" placeholder="Date of birth (YYYY-MM-DD)" required/>
                <span id="doberror" class="font-weight-bold"></span></td></td>
            </tr>
            <div alight="left">
                 <tr>
                 <label class="form-label" >Gender (M/F)</label>
                <td><input type="text" id="gender" onkeyup="myFunction5()" th:field="*{gender}" class="form-control" placeholder="Gender (M/F)" required/>
                <span id="gendererror" class="font-weight-bold"></span></td>
            </tr>
            </div> 
			<br>
            <tr>
            <td colspan="2"><button type="submit" class="btn btn-info">Save</button> </td>
            </tr>
        </table>
    </form>
</div>
<script type="text/javascript">

    function myFunction() {

    	var name = document.getElementById('name').value;
    	var namecheck  = /^[A-Za-z]{3,40}$/;
    	if (namecheck.test(name))
        {
          	document.getElementById('nameerror').innerHTML=" ";
        }
        else
        {
        	document.getElementById('nameerror').style.color="red";
          	document.getElementById('nameerror').innerHTML=" **Name Should be between 3 to 40 charcter ";
        }
    }
    
    function myFunction1() {

    	var email = document.getElementById('email').value;
    	var emailcheck =/^[a-zA-z][a-zA-Z0-9]{2,10}([a-zA-Z0-9][\.+\-+\_]){0,5}[a-zA-Z0-9]{2,10}@([a-zA-Z0-9]{2,8}\.){1,4}[a-zA-Z0-9]{2,5}$/;
    	if (emailcheck.test(email))
        {
          	document.getElementById('emailerror').innerHTML=" ";
        }
        else
        {
        	document.getElementById('emailerror').style.color="red";
          	document.getElementById('emailerror').innerHTML=" **Email is Invalid ";
        }
    }
    
    function myFunction2() {
		
    	var number = document.getElementById('mobile').value;
    	var phonecheck =/^[9+8+7+6][0-9]{9}$/;
    	if (phonecheck.test(number))
        {
          	document.getElementById('mobileerror').innerHTML=" ";
        }
        else
        {
        	document.getElementById('mobileerror').style.color="red";
          	document.getElementById('mobileerror').innerHTML=" ** Mobile Number is Invalid";
        }
    }
    
function myFunction3() {
		
    	var number = document.getElementById('smobile').value;
    	var phonecheck =/^[9+8+7+6][0-9]{9}$/;
    	if (phonecheck.test(number))
        {
          	document.getElementById('smobileerror').innerHTML=" ";
        }
        else
        {
        	document.getElementById('smobileerror').style.color="red";
          	document.getElementById('smobileerror').innerHTML=" ** Mobile Number is Invalid";
        }
    }
    
function myFunction4() {
	
	var dob = document.getElementById('dob').value;
	var dobcheck =/^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$/;
	if (dobcheck.test(dob))
    {
      	document.getElementById('doberror').innerHTML=" ";
    }
    else
    {
    	document.getElementById('doberror').style.color="red";
      	document.getElementById('doberror').innerHTML=" ** Date is Invalid";
    }
}
    
    function myFunction5() {
    	
    	var gender = document.getElementById('gender').value;
    	var gendercheck  = /^[A-Z]{1}$/;
    	if (gendercheck.test(gender))
        {
          	document.getElementById('gendererror').innerHTML=" ";
        }
        else
        {
        	document.getElementById('gendererror').style.color="red";
          	document.getElementById('gendererror').innerHTML=" ** Gender Should be of 1 charcter in capital ";
        }
    }

  </script>
</body>
</html>